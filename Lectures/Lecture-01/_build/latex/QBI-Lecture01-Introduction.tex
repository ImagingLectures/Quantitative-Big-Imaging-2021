%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}


\usepackage{sphinxmessages}




\title{Quantitative Big Imaging - Introduction}
\date{Feb 20, 2021}
\release{}
\author{Anders Kaestner}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{01-Introduction::doc}}


\sphinxAtStartPar
\sphinxstylestrong{Quantitative Big Imaging} ETHZ: 227\sphinxhyphen{}0966\sphinxhyphen{}00L




\chapter{Todays lecture}
\label{\detokenize{01-Introduction:todays-lecture}}\begin{itemize}
\item {} 
\sphinxAtStartPar
About the course

\item {} 
\sphinxAtStartPar
Motivating the use of quantitive methods in imaging

\item {} 
\sphinxAtStartPar
What is an image?

\item {} 
\sphinxAtStartPar
Where do images come from?

\item {} 
\sphinxAtStartPar
Science and Reproducibility

\item {} 
\sphinxAtStartPar
Workflows

\end{itemize}


\section{We need some python modules}
\label{\detokenize{01-Introduction:we-need-some-python-modules}}
\sphinxAtStartPar
Python is a modular scripting language with limited functionality. Features are added through modules that are imported.
These are the modules that are needed for this lecture. Please run this cell before you start using the notebook.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k}{as} \PYG{n+nn}{pd}
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}

\PYG{k+kn}{from} \PYG{n+nn}{skimage}\PYG{n+nn}{.}\PYG{n+nn}{io} \PYG{k+kn}{import} \PYG{n}{imread}
\PYG{k+kn}{from} \PYG{n+nn}{scipy}\PYG{n+nn}{.}\PYG{n+nn}{ndimage} \PYG{k+kn}{import} \PYG{n}{convolve}
\PYG{k+kn}{from} \PYG{n+nn}{skimage}\PYG{n+nn}{.}\PYG{n+nn}{morphology} \PYG{k+kn}{import} \PYG{n}{disk}
\PYG{k+kn}{from} \PYG{n+nn}{skimage}\PYG{n+nn}{.}\PYG{n+nn}{transform} \PYG{k+kn}{import} \PYG{n}{resize}
\PYG{k+kn}{from} \PYG{n+nn}{itertools} \PYG{k+kn}{import} \PYG{n}{product}
\PYG{k+kn}{import} \PYG{n+nn}{os}
\end{sphinxVerbatim}


\chapter{About the course}
\label{\detokenize{01-Introduction:about-the-course}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Who are we?

\item {} 
\sphinxAtStartPar
Who are you?

\item {} 
\sphinxAtStartPar
What is expected?

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Why does this class exist?}

\item {} 
\sphinxAtStartPar
Collection

\item {} 
\sphinxAtStartPar
Changing computing (Parallel / Cloud)

\item {} 
\sphinxAtStartPar
Course outline

\end{itemize}


\section{Who are we?}
\label{\detokenize{01-Introduction:who-are-we}}


\sphinxAtStartPar
\sphinxstylestrong{Anders Kaestner}

\sphinxAtStartPar
You will hear me a lot during this course. I am the lecturer and I will also support you with problems during the exercises.


\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Beamline scientist} at the ICON Beamline at the SINQ (Neutron Source) at Paul Scherrer Institute
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Lecturer} at ETH Zurich

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Algorithm developer} Varian Medical Systems, Baden\sphinxhyphen{}Daettwil

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Post Doc} at ETH Zurich, Inst for Terrestial Ecology

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{PhD} at Chalmers Institute of Technology, Sweden, Signal processing

\end{itemize}

\sphinxAtStartPar
\sphinxhref{mailto:anders.kaestner@psi.ch}{anders.kaestner@psi.ch}



\sphinxAtStartPar
\sphinxstylestrong{Stefano van Gogh}

\sphinxAtStartPar
Will help you during the exercise sessions.


\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{PhD Student} in the X\sphinxhyphen{}Ray Microscopy Group at ETH Zurich and Swiss Light Source at Paul Scherrer Institute

\item {} 
\sphinxAtStartPar
Teaching assistant

\end{itemize}

\sphinxAtStartPar
\sphinxhref{mailto:stefano.van-gogh@psi.ch}{stefano.van\sphinxhyphen{}gogh@psi.ch}


\section{Who are you?}
\label{\detokenize{01-Introduction:who-are-you}}
\sphinxAtStartPar
This course is targeting a wide range of students with different levels of experience. In the table you’ll see were students came from in previos years. Some have a technical background others are merely producing images in the line of their project and have never seen much more than photoshop and similar programs for processing image data. Using some kind of programming is nescessary to perform quantitative image analysis on large data sets. A single or a few images can easily be handled with interactive software, but taking it beyond that is hard without writing some lines of code.

\sphinxAtStartPar
Now, some of you have little to no programming experience while others have been programming since they got their first computer in the hand.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
A wide spectrum of backgrounds
&\sphinxstyletheadfamily 
\sphinxAtStartPar
A wide range of skills
\\
\hline
\sphinxAtStartPar
Biomedical Engineers
&
\sphinxAtStartPar

\\
\hline
\sphinxAtStartPar
Physicists
&
\sphinxAtStartPar
I think I’ve heard of python before
\\
\hline
\sphinxAtStartPar
Chemists
&
\sphinxAtStartPar
.
\\
\hline
\sphinxAtStartPar
Art History Researchers
&
\sphinxAtStartPar
.
\\
\hline
\sphinxAtStartPar
Mechanical Engineers
&
\sphinxAtStartPar
I write template C++ code and hand optimize it afterwards
\\
\hline
\sphinxAtStartPar
and Computer Scientists
&
\sphinxAtStartPar

\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}




\section{So how will this ever work?}
\label{\detokenize{01-Introduction:so-how-will-this-ever-work}}
\sphinxAtStartPar
Now you maybe start to get worried! The purpose of this course is not to teach you programming but rather to provide you with a bag full recipes that you can use in your projects. Most of these recipes are just a list of the commands from different python moduls that you need to perform your analysis. A side\sphinxhyphen{}effect will probably be that you learn one or two programming tricks on the way.

\sphinxAtStartPar
In the lectures, there will be small code pieces on the slides. Some of these are there to illustrate how an operation works, while other parts are there for the nice presentation of the results (this is mostly the second half of the code cell). Presenting the results is important. In the end, you want to show your results to the scinetific community. So even though the plotting clutters the slide, there is something to learn there as well.

\sphinxAtStartPar
\sphinxstylestrong{Adaptive assignments}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Conceptual, graphical assignments with practical examples
\begin{itemize}
\item {} 
\sphinxAtStartPar
Emphasis on chosing correct steps and understanding workflow

\end{itemize}

\item {} 
\sphinxAtStartPar
Opportunities to create custom implementations, and perform more complicated analysis on larger datasets if interested
\begin{itemize}
\item {} 
\sphinxAtStartPar
Emphasis on performance, customizing analysis, and scalability

\end{itemize}

\end{itemize}


\section{Course Expectations}
\label{\detokenize{01-Introduction:course-expectations}}
\sphinxAtStartPar
The practical part of the course has two parts. None of these are mandatory, but they will help you to better understand use the material you have learnt in the lectures.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Exercises
\\
\hline
\sphinxAtStartPar
Usually 1 set per lecture
\\
\hline
\sphinxAtStartPar
Optional (but recommended!)
\\
\hline
\sphinxAtStartPar
Easy \sphinxhyphen{} jupyter notebooks are prepared for the exercises
\\
\hline
\sphinxAtStartPar
Advanced \sphinxhyphen{} Writing Python, Java, C++, …
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
The exercises are prepared in a way that you learn step by step what you need to do and guids you through the problems. We will be using jupyter notebooks for the lectures. This is a very common way to work with image data these days.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Science project
\\
\hline
\sphinxAtStartPar
Optional (but strongly recommended)
\\
\hline
\sphinxAtStartPar
Applying Techniques to answer scientific question!
\\
\hline
\sphinxAtStartPar
Ideally use on a topic relevant for your current project, thesis, or personal activities
\\
\hline
\sphinxAtStartPar
or choose from one of ours (will be online, soon)
\\
\hline
\sphinxAtStartPar
Present approach, analysis, and results
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
In the optional science projects you will have to opportunity to test what you have learned during the course on real problems. This is the place for your creativity.


\section{Projects}
\label{\detokenize{01-Introduction:projects}}\begin{itemize}
\item {} 
\sphinxAtStartPar
A small image processing project

\item {} 
\sphinxAtStartPar
Can be related to you Master or PhD project

\item {} 
\sphinxAtStartPar
You will get input and ideas for your own projects

\item {} 
\sphinxAtStartPar
You will get hands on experience on the techniques you learn here

\item {} 
\sphinxAtStartPar
Can be used as discussion base for your exam

\end{itemize}


\section{Course Overview}
\label{\detokenize{01-Introduction:course-overview}}

\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Topic
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Date
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Title
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
\\
\hline
\sphinxAtStartPar
\sphinxstylestrong{Introduction}
&
\sphinxAtStartPar
25th February
&
\sphinxAtStartPar
Introduction and Workflows
&
\sphinxAtStartPar
Basic overview of the course, introduction to …
\\
\hline
\sphinxAtStartPar
\sphinxstylestrong{Data}
&
\sphinxAtStartPar
4th March
&
\sphinxAtStartPar
Image Enhancement
&
\sphinxAtStartPar
Overview of what techniques are available for …
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
11th March
&
\sphinxAtStartPar
Ground Truth: Building and Augmenting Datasets
&
\sphinxAtStartPar
Examples of large datasets, how they were buil…
\\
\hline
\sphinxAtStartPar
\sphinxstylestrong{Segmentation}
&
\sphinxAtStartPar
18th March
&
\sphinxAtStartPar
Basic Segmentation, Discrete Binary Structures
&
\sphinxAtStartPar
How to convert images into structures, startin…
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
25th March
&
\sphinxAtStartPar
Advanced Segmentation
&
\sphinxAtStartPar
More advanced techniques for extracting struct…
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
1st April
&
\sphinxAtStartPar
Supervised Problems and Segmentation
&
\sphinxAtStartPar
More advanced techniques for extracting struct…
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
8th April
&
\sphinxAtStartPar
Easter break
&
\sphinxAtStartPar
Search for eggs
\\
\hline
\sphinxAtStartPar
\sphinxstylestrong{Analysis}
&
\sphinxAtStartPar
15th April
&
\sphinxAtStartPar
Analyzing Single Objects, Shape, and Texture
&
\sphinxAtStartPar
The analysis and characterization of single st…
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
22th April
&
\sphinxAtStartPar
Analyzing Complex Objects and Distributions
&
\sphinxAtStartPar
What techniques are available to analyze more …
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
29th April
&
\sphinxAtStartPar
Dynamic Experiments
&
\sphinxAtStartPar
Performing tracking and registration in dynami…
\\
\hline
\sphinxAtStartPar
\sphinxstylestrong{Big Imaging}
&
\sphinxAtStartPar
6th May
&
\sphinxAtStartPar
Imaging with multiple modalities
&
\sphinxAtStartPar
Combining information from different sources
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
13th May
&
\sphinxAtStartPar
Ascension
&
\sphinxAtStartPar
Enjoy a lovely early summers day
\\
\hline
\sphinxAtStartPar

&
\sphinxAtStartPar
20th May
&
\sphinxAtStartPar
Scaling Up / Big Data
&
\sphinxAtStartPar
Performing large scale analyses on clusters
\\
\hline
\sphinxAtStartPar
\sphinxstylestrong{Wrapping up}
&
\sphinxAtStartPar
27th May
&
\sphinxAtStartPar
Project Presentations
&
\sphinxAtStartPar
You present your projects
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Today’s  Reading Material}
\label{\detokenize{01-Introduction:today-s-reading-material}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Some book on image processing with python (to be updated)

\item {} 
\sphinxAtStartPar
Cloud Computing

\item {} 
\sphinxAtStartPar
\sphinxhref{http://www-inst.eecs.berkeley.edu/~cs61c/sp14/}{The Case for Energy\sphinxhyphen{}Proportional Computing} \_ Luiz André Barroso, Urs Hölzle, IEEE Computer, December 2007\_

\item {} 
\sphinxAtStartPar
\sphinxhref{http://www.gotw.ca/publications/concurrency-ddj.htm}{Concurrency}

\item {} 
\sphinxAtStartPar
Reproducibility

\item {} 
\sphinxAtStartPar
\sphinxhref{http://www.economist.com/news/briefing/21588057-scientists-think-science-self-correcting-alarming-degree-it-not-trouble}{Trouble at the lab} \sphinxstyleemphasis{Scientists like to think of science as self\sphinxhyphen{}correcting. To an alarming degree, it is not}

\item {} 
\sphinxAtStartPar
\sphinxhref{http://simplystatistics.org/2014/06/06/the-real-reason-reproducible-research-is-important/}{Why is reproducible research important?} \sphinxstyleemphasis{The Real Reason Reproducible Research is Important}

\item {} 
\sphinxAtStartPar
\sphinxhref{http://software-carpentry.org/blog/2011/10/the-science-code-manifestos-five-cs.html}{Science Code Manifesto}

\item {} 
\sphinxAtStartPar
\sphinxhref{https://www.coursera.org/course/repdata}{Reproducible Research Class} @ Johns Hopkins University

\end{itemize}


\section{Literature / Useful References}
\label{\detokenize{01-Introduction:literature-useful-references}}
\sphinxAtStartPar
These are books that are useful in many of the lectures. In particular the Image processing hand book by John Russ shows you an overview of typical image processing techniques.
\begin{itemize}
\item {} 
\sphinxAtStartPar
John C. Russ, “The Image Processing Handbook”,(Boca Raton, CRC Press)
\begin{itemize}
\item {} 
\sphinxAtStartPar
Available \sphinxhref{http://dx.doi.org/10.1201/9780203881095}{online} within domain \sphinxhref{http://ethz.ch}{ethz.ch} (or \sphinxhref{http://proxy.ethz.ch}{proxy.ethz.ch} / public VPN)

\end{itemize}

\item {} 
\sphinxAtStartPar
Jean Claude, Morphometry with R
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxhref{http://link.springer.com/book/10.1007\%2F978-0-387-77789-4}{Online} through ETHZ

\end{itemize}

\end{itemize}


\chapter{Motivation \sphinxhyphen{} You have data!}
\label{\detokenize{01-Introduction:motivation-you-have-data}}

\section{Imaging experiments produce a lot of data}
\label{\detokenize{01-Introduction:imaging-experiments-produce-a-lot-of-data}}
\sphinxAtStartPar
Working with imaging techniques you will get a lot of images that shows the sample in the eye of the technique you are using. The experiment were you acquire these images is only a small fraction of the complete workflow from idea to the final scientific publiction. The amout of data can also be overwhelming for many scientist with the consequence that the data is never analyzed properly, and then also not published in the way it really deserves.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.8]{{yougotdata}.png}
\caption{A typical imaging experiment produces large amounts of data.}\label{\detokenize{01-Introduction:id7}}\end{figure}




\section{Motivation \sphinxhyphen{} how to proceed?}
\label{\detokenize{01-Introduction:motivation-how-to-proceed}}
\sphinxAtStartPar
Now is the question how to proceed towards a working analysis workflow that results in repeatable analyses for your data.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=1.0]{{crazyworkflow}.png}
\caption{A crazy unstructured and unclear work flow to analyze images from your experiment.}\label{\detokenize{01-Introduction:id8}}\end{figure}


\begin{itemize}
\item {} 
\sphinxAtStartPar
To understand what, why and how from the moment an image is produced until it is finished (published, used in a report, …)

\item {} 
\sphinxAtStartPar
To learn how to go from one analysis on one image to 10, 100, or 1000 images (without working 10, 100, or 1000X harder)

\end{itemize}


\section{High acquisition rates}
\label{\detokenize{01-Introduction:high-acquisition-rates}}
\sphinxAtStartPar
The trend in imaging is that experimentalist want to follow faster and faster processes. This wish can be supported the technical development of new detectors that provide very high acqisition rates. Here, we can also see that some cameras are able to produce more data than is uploaded per day on facebook and instagram!
\begin{itemize}
\item {} 
\sphinxAtStartPar
Detectors are getting bigger and faster constantly

\item {} 
\sphinxAtStartPar
Todays detectors are really fast
\begin{itemize}
\item {} 
\sphinxAtStartPar
2560 x 2160 images @ 1500+ times a second = 8GB/s

\end{itemize}

\item {} 
\sphinxAtStartPar
Matlab / Avizo / Python / … are saturated after 60 seconds

\end{itemize}

\sphinxAtStartPar
Many of the analysis platforms are already overwhelmed with handling the data rates produced by typical detector systems at imaging instrument. This restriction is partly due to hardware limitations. The memory is to small, hard drives are not sufficiently fast. The other side of the problem is that these tools are not prepared to work with large data streams.
\begin{itemize}
\item {} 
\sphinxAtStartPar
A single camera
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxhref{http://news.cnet.com/8301-1023\_3-57498531-93/facebook-processes-more-than-500-tb-of-data-daily/}{More information per day than Facebook}

\item {} 
\sphinxAtStartPar
\sphinxhref{http://techcrunch.com/2013/01/17/instagram-reports-90m-monthly-active-users-40m-photos-per-day-and-8500-likes-per-second/}{Three times as many images per second as Instagram}

\end{itemize}

\end{itemize}


\section{Different sources of images}
\label{\detokenize{01-Introduction:different-sources-of-images}}
\sphinxAtStartPar
Images are produced by many different detectors and in some cases they are even the output from simulations. In the next sections we see some different imaging modalities and the data rates they produce.


\subsection{X\sphinxhyphen{}Ray}
\label{\detokenize{01-Introduction:x-ray}}
\sphinxAtStartPar
X\sphinxhyphen{}ray imaging at syncrotron light sources produces very high frame rates thanks to the high brilliance of the source. Here are some examples of data rates from some instruments.
\begin{itemize}
\item {} 
\sphinxAtStartPar
SRXTM images at (\textgreater{}1000fps) \(\rightarrow\) 8GB/s

\item {} 
\sphinxAtStartPar
cSAXS diffraction patterns at 30GB/s

\item {} 
\sphinxAtStartPar
Nanoscopium Beamline, 10TB/day, 10\sphinxhyphen{}500GB file sizes

\end{itemize}


\subsection{Optical}
\label{\detokenize{01-Introduction:optical}}
\sphinxAtStartPar
Optical imaging methods are more modest than the X\sphinxhyphen{}ray techniques, but still they produce data in the order of some hundred Mb per second.
\begin{itemize}
\item {} 
\sphinxAtStartPar
Light\sphinxhyphen{}sheet microscopy (see talk of Jeremy Freeman) produces images \(\rightarrow\) 500MB/s

\item {} 
\sphinxAtStartPar
High\sphinxhyphen{}speed confocal images at (\textgreater{}200fps) \(\rightarrow\) 78Mb/s

\end{itemize}


\subsection{Personal}
\label{\detokenize{01-Introduction:personal}}
\sphinxAtStartPar
Finally, we also take a look at cameras on the consumer market and see that these devices also produce relatively high data rates. This data must mostly be handled by normal household computers, which can be a challenging task…
\begin{itemize}
\item {} 
\sphinxAtStartPar
GoPro 4 Black \sphinxhyphen{} 60MB/s (3840 x 2160 x 30fps) for \$600

\item {} 
\sphinxAtStartPar
\sphinxhref{https://www.kickstarter.com/projects/1623255426/fps1000-the-low-cost-high-frame-rate-camera}{fps1000} \sphinxhyphen{} 400MB/s (640 x 480 x 840 fps) for \$400

\end{itemize}


\section{The experiment life cycle}
\label{\detokenize{01-Introduction:the-experiment-life-cycle}}
\sphinxAtStartPar
Now we have seen that there is a wish to obtain data at high rates and that there are technological solutions to provide this. The remainging part to develop is the post processing.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Experimental Design} finding the right technique, picking the right dyes and samples has stayed relatively consistent, better techniques lead to more demanding scientists.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Measurements} the actual acquisition speed of the data has increased wildly due to better detectors, parallel measurement, and new higher intensity sources

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Management} storing, backing up, setting up databases, these processes have become easier and more automated as data magnitudes have increased

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Post Processing} this portion has is the most time\sphinxhyphen{}consuming and difficult and has seen minimal improvements over the last years

\end{enumerate}


\bigskip\hrule\bigskip


\sphinxAtStartPar
The post processing is the least trivial part to generalize. The initial steps are often posible to generalize as these are operations that all types of imaging experiments need to go through. When it comes to the experiment specific analysis the degree of generalization decreases and the scientists are left to develop their own procedure to extract the quantitative information from the images.


\subsection{How is time used during the experiment life cycle?}
\label{\detokenize{01-Introduction:how-is-time-used-during-the-experiment-life-cycle}}
\sphinxAtStartPar
With the development of faster acquisision systems there has been a change in the ratio between
\begin{itemize}
\item {} 
\sphinxAtStartPar
Exeperiment design and preparation

\item {} 
\sphinxAtStartPar
Measurements

\item {} 
\sphinxAtStartPar
Data management

\item {} 
\sphinxAtStartPar
and post processing

\end{itemize}

\sphinxAtStartPar
over the years. This in particular the case for X\sphinxhyphen{}ray imaging where the flux is high and the acquisition is limited by the detector technology. In other modalities, where the measurement is flux limited we see a different distribution.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.5]{{qmia-014}.png}
\caption{The ratio of how much time is spent on different tasks during the lifecycle of an imaging experiment.}\label{\detokenize{01-Introduction:id9}}\end{figure}

\sphinxAtStartPar
What also increases the post processing time is that the experiments have become more complicated over the years. Twenty years ago, it was sufficient to show qualitative information a beautify volume rendering or a movie of the sample. Meanwhile, it has become a requirement that you provide quantitative results from the images.




\section{Handling masses of images}
\label{\detokenize{01-Introduction:handling-masses-of-images}}

\subsection{So… how much is a TB, really?}
\label{\detokenize{01-Introduction:so-how-much-is-a-tb-really}}
\sphinxAtStartPar
We have been talking about different data amounts of MB, GB, and TB. But, what does that really mean in reality? Let us explore what is a TB.

\sphinxAtStartPar
If \sphinxstylestrong{you} looked at one image with 1000 x 1000 pixels (1 Mpixels)

\sphinxAtStartPar
Here we create one image with 1000x1000 pixels with random values form a uniform distribution {[}0,1{]} and show it.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}

\PYG{n}{plt}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{random}\PYG{o}{.}\PYG{n}{uniform}\PYG{p}{(}\PYG{n}{size} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{1000}\PYG{p}{,} \PYG{l+m+mi}{1000}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} 
           \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{viridis}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_62_0}.png}

\sphinxAtStartPar
every second, it would take you

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} assuming 16 bit images and a \PYGZsq{}metric\PYGZsq{} terabyte}
\PYG{n}{OneTB}     \PYG{o}{=} \PYG{l+m+mf}{1e12}
\PYG{n}{ImageSize} \PYG{o}{=} \PYG{l+m+mi}{1000}\PYG{o}{*}\PYG{l+m+mi}{1000}\PYG{o}{*}\PYG{l+m+mi}{16}\PYG{o}{/}\PYG{l+m+mi}{8}
\PYG{n}{hour}      \PYG{o}{=} \PYG{l+m+mi}{60}\PYG{o}{*}\PYG{l+m+mi}{60}

\PYG{n}{time\PYGZus{}per\PYGZus{}tb} \PYG{o}{=} \PYG{n}{OneTB}\PYG{o}{/}\PYG{n}{ImageSize}\PYG{o}{/}\PYG{n}{hour}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}0:0.1f\PYGZcb{}}\PYG{l+s+s2}{ hours to view a terabyte}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{time\PYGZus{}per\PYGZus{}tb}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
138.9 hours to view a terabyte
\end{sphinxVerbatim}


\subsection{Overwhelmed scientist}
\label{\detokenize{01-Introduction:overwhelmed-scientist}}
\sphinxAtStartPar
Providing quantitative statements about image data is often very hard. You can may manage to do it on a single images like the bone image below.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{bone-cells}.png}
\caption{A slice image show bone cells.}\label{\detokenize{01-Introduction:id10}}\end{figure}

\sphinxAtStartPar
You would like to know:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Count how many cells are in the bone slice.

\item {} 
\sphinxAtStartPar
Ignore the ones that are ‘too big’ or shaped ‘strangely’.

\item {} 
\sphinxAtStartPar
Are there more on the right side or left side?

\item {} 
\sphinxAtStartPar
Are the ones on the right or left bigger, top or bottom?

\end{itemize}




\subsection{More overwhelmed scientist}
\label{\detokenize{01-Introduction:more-overwhelmed-scientist}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Statistical} \PYG{n}{analysis} \PYG{n}{requires} \PYG{n}{that} \PYG{n}{you} \PYG{n}{study} \PYG{n}{many} \PYG{n}{samples} \PYG{o+ow}{and} \PYG{o+ow}{not} \PYG{n}{just} \PYG{n}{a} \PYG{n}{single} \PYG{n}{one}\PYG{o}{.} \PYG{n}{Furthermore}\PYG{p}{,} \PYG{n}{the} 
\end{sphinxVerbatim}

\sphinxAtStartPar
Many samples are needed:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Do it all over again for 96 more samples

\item {} 
\sphinxAtStartPar
This time in 3D with 2000 slices instead of just one!

\end{itemize}




\subsection{Bring on the pain}
\label{\detokenize{01-Introduction:bring-on-the-pain}}
\sphinxAtStartPar
Great variations in the population
\begin{itemize}
\item {} 
\sphinxAtStartPar
Now again with 1090 samples!

\item {} 
\sphinxAtStartPar
How to measure?

\item {} 
\sphinxAtStartPar
How to analyze?

\end{itemize}




\section{It gets better}
\label{\detokenize{01-Introduction:it-gets-better}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Those metrics were quantitative and could be easily visually extracted from the images

\item {} 
\sphinxAtStartPar
What happens if you have \sphinxstyleemphasis{softer} metrics
\begin{itemize}
\item {} 
\sphinxAtStartPar
How aligned are these cells?

\item {} 
\sphinxAtStartPar
Is the group on the left more or less aligned than the right?

\item {} 
\sphinxAtStartPar
errr?

\end{itemize}

\end{itemize}




\section{Dynamic Information}
\label{\detokenize{01-Introduction:dynamic-information}}\begin{itemize}
\item {} 
\sphinxAtStartPar
How many bubbles are here?

\item {} 
\sphinxAtStartPar
How fast are they moving?

\item {} 
\sphinxAtStartPar
Do they all move the same speed?

\item {} 
\sphinxAtStartPar
Do bigger bubbles move faster?

\item {} 
\sphinxAtStartPar
Do bubbles near the edge move slower?

\item {} 
\sphinxAtStartPar
Are they rearranging?

\end{itemize}

\sphinxAtStartPar



\chapter{Images}
\label{\detokenize{01-Introduction:images}}

\section{An introduction to images}
\label{\detokenize{01-Introduction:an-introduction-to-images}}

\subsection{What is an image?}
\label{\detokenize{01-Introduction:what-is-an-image}}
\sphinxAtStartPar
A very abstract definition:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{A pairing between spatial information (position)}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{and some other kind of information (value).}

\end{itemize}

\sphinxAtStartPar
In most cases this is a 2\sphinxhyphen{} or 3\sphinxhyphen{}dimensional position (x,y,z coordinates) and a numeric value (intensity)


\subsection{Image sampling}
\label{\detokenize{01-Introduction:image-sampling}}

\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
The world is
&\sphinxstyletheadfamily 
\sphinxAtStartPar
The computer needs
\\
\hline
\sphinxAtStartPar
Continuous
&
\sphinxAtStartPar
Discrete levels
\\
\hline
\sphinxAtStartPar
No boundaries
&
\sphinxAtStartPar
Limited extent
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.75]{{grid}.pdf}
\caption{The real world is sampled into discrete images with limited extent.}\label{\detokenize{01-Introduction:id11}}\end{figure}




\subsection{What does sampling mean}
\label{\detokenize{01-Introduction:what-does-sampling-mean}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{img}\PYG{o}{=}\PYG{n}{np}\PYG{o}{.}\PYG{n}{load}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{../../common/data/wood.npy}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{figure}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{[}\PYG{l+m+mi}{15}\PYG{p}{,}\PYG{l+m+mi}{7}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplot}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{img}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Original}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{downsize} \PYG{o}{=}  \PYG{l+m+mi}{2}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplot}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{resize}\PYG{p}{(}\PYG{n}{img}\PYG{p}{,}\PYG{p}{(}\PYG{n}{img}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{/}\PYG{o}{/} \PYG{n}{downsize}\PYG{p}{,} \PYG{n}{img}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{/}\PYG{o}{/} \PYG{n}{downsize}\PYG{p}{)}\PYG{p}{,} \PYG{n}{anti\PYGZus{}aliasing}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Downsize }\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{x}\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{downsize}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{downsize} \PYG{o}{=} \PYG{l+m+mi}{32}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplot}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{resize}\PYG{p}{(}\PYG{n}{img}\PYG{p}{,}\PYG{p}{(}\PYG{n}{img}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{/}\PYG{o}{/} \PYG{n}{downsize}\PYG{p}{,} \PYG{n}{img}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{/}\PYG{o}{/} \PYG{n}{downsize}\PYG{p}{)}\PYG{p}{,}\PYG{n}{anti\PYGZus{}aliasing}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Downsize }\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{x}\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{downsize}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{levels}   \PYG{o}{=} \PYG{l+m+mi}{16}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplot}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{floor}\PYG{p}{(}\PYG{n}{img}\PYG{o}{*}\PYG{n}{levels}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{ Levels}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{levels}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{levels}   \PYG{o}{=} \PYG{l+m+mi}{4} \PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplot}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{6}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{floor}\PYG{p}{(}\PYG{n}{img}\PYG{o}{*}\PYG{n}{levels}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{ Levels}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{levels}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_82_0}.png}


\chapter{Let’s create a small image}
\label{\detokenize{01-Introduction:let-s-create-a-small-image}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{basic\PYGZus{}image} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{random}\PYG{o}{.}\PYG{n}{choice}\PYG{p}{(}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{,} \PYG{n}{size} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{xx}\PYG{p}{,} \PYG{n}{yy}   \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{meshgrid}\PYG{p}{(}\PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{basic\PYGZus{}image}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{basic\PYGZus{}image}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{image\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{n+nb}{dict}\PYG{p}{(}\PYG{n}{x} \PYG{o}{=} \PYG{n}{xx}\PYG{o}{.}\PYG{n}{ravel}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
                 \PYG{n}{y} \PYG{o}{=} \PYG{n}{yy}\PYG{o}{.}\PYG{n}{ravel}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
                 \PYG{n}{Intensity} \PYG{o}{=} \PYG{n}{basic\PYGZus{}image}\PYG{o}{.}\PYG{n}{ravel}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{image\PYGZus{}df}\PYG{p}{[}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{]}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
   x  y  Intensity
0  0  0         31
1  1  0         43
2  2  0         44
3  3  0          6
4  4  0         52
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{basic\PYGZus{}image}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gray}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{colorbar}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;} 
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_85_0}.png}


\section{2D Intensity Images}
\label{\detokenize{01-Introduction:d-intensity-images}}
\sphinxAtStartPar
The next step is to apply a color map (also called lookup table, LUT) to the image
\begin{itemize}
\item {} 
\sphinxAtStartPar
so it is a bit more exciting

\item {} 
\sphinxAtStartPar
some features are easier to detect \sphinxhref{https://doi.org/10.1063/1.4822401}{Rogowitz et al. 1996}

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax1} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}
\PYG{n}{plot\PYGZus{}image} \PYG{o}{=} \PYG{n}{ax1}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{basic\PYGZus{}image}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Blues}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{colorbar}\PYG{p}{(}\PYG{n}{plot\PYGZus{}image}\PYG{p}{)}

\PYG{k}{for} \PYG{n}{\PYGZus{}}\PYG{p}{,} \PYG{n}{c\PYGZus{}row} \PYG{o+ow}{in} \PYG{n}{image\PYGZus{}df}\PYG{o}{.}\PYG{n}{iterrows}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{ax1}\PYG{o}{.}\PYG{n}{text}\PYG{p}{(}\PYG{n}{c\PYGZus{}row}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c\PYGZus{}row}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{s} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}02d}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n}{c\PYGZus{}row}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{fontdict} \PYG{o}{=} \PYG{n+nb}{dict}\PYG{p}{(}\PYG{n}{color} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_87_0}.png}


\subsection{Different colormaps}
\label{\detokenize{01-Introduction:different-colormaps}}
\sphinxAtStartPar
Color maps can be arbitrarily defined based on how we would like to visualize the information in the image

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{plot\PYGZus{}image} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{basic\PYGZus{}image}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{jet}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{colorbar}\PYG{p}{(}\PYG{n}{plot\PYGZus{}image}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_89_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{plot\PYGZus{}image} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{basic\PYGZus{}image}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hot}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{colorbar}\PYG{p}{(}\PYG{n}{plot\PYGZus{}image}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_90_0}.png}


\subsection{Lookup Tables}
\label{\detokenize{01-Introduction:lookup-tables}}
\sphinxAtStartPar
Formally a color map is lookup table or a function which
\$\( f(\textrm{Intensity}) \rightarrow \textrm{Color} \)\$


\subsubsection{Matplotlib’s color maps}
\label{\detokenize{01-Introduction:matplotlib-s-color-maps}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib} \PYG{k}{as} \PYG{n+nn}{mpl}
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{from} \PYG{n+nn}{matplotlib} \PYG{k+kn}{import} \PYG{n}{cm}
\PYG{c+c1}{\PYGZsh{}from colorspacious import cspace\PYGZus{}converter}
\PYG{k+kn}{from} \PYG{n+nn}{collections} \PYG{k+kn}{import} \PYG{n}{OrderedDict}
\PYG{n}{cmaps} \PYG{o}{=} \PYG{n}{OrderedDict}\PYG{p}{(}\PYG{p}{)} 
\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Perceptually Uniform Sequential}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{viridis}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{plasma}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{inferno}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{magma}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{cividis}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Sequential}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Greys}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Purples}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Blues}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Greens}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Oranges}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Reds}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YlOrBr}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YlOrRd}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{OrRd}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{PuRd}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RdPu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{BuPu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GnBu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{PuBu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YlGnBu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{PuBuGn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{BuGn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YlGn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Sequential (2)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{binary}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}yarg}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}gray}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gray}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{pink}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{spring}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{summer}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{autumn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{winter}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{cool}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Wistia}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hot}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{afmhot}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}heat}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{copper}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Diverging}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{PiYG}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{PRGn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{BrBG}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{PuOr}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RdGy}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RdBu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RdYlBu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RdYlGn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Spectral}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{coolwarm}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bwr}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{seismic}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Cyclic}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{twilight}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{twilight\PYGZus{}shifted}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hsv}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Qualitative}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Pastel1}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Pastel2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Paired}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Accent}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                        \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Dark2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Set1}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Set2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Set3}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                        \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{tab10}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{tab20}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{tab20b}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{tab20c}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

\PYG{n}{cmaps}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Miscellaneous}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{flag}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{prism}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ocean}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}earth}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{terrain}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}stern}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gnuplot}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gnuplot2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CMRmap}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{cubehelix}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{brg}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
            \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}rainbow}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{rainbow}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{jet}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{nipy\PYGZus{}spectral}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gist\PYGZus{}ncar}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}


\PYG{n}{nrows} \PYG{o}{=} \PYG{n+nb}{max}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{cmap\PYGZus{}list}\PYG{p}{)} \PYG{k}{for} \PYG{n}{cmap\PYGZus{}category}\PYG{p}{,} \PYG{n}{cmap\PYGZus{}list} \PYG{o+ow}{in} \PYG{n}{cmaps}\PYG{o}{.}\PYG{n}{items}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}


\PYG{n}{gradient} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{linspace}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{256}\PYG{p}{)}
\PYG{n}{gradient} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{vstack}\PYG{p}{(}\PYG{p}{(}\PYG{n}{gradient}\PYG{p}{,} \PYG{n}{gradient}\PYG{p}{)}\PYG{p}{)}


\PYG{k}{def} \PYG{n+nf}{plot\PYGZus{}color\PYGZus{}gradients}\PYG{p}{(}\PYG{n}{cmap\PYGZus{}category}\PYG{p}{,} \PYG{n}{cmap\PYGZus{}list}\PYG{p}{,} \PYG{n}{nrows}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{fig}\PYG{p}{,} \PYG{n}{axes} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{n}{nrows}\PYG{o}{=}\PYG{n}{nrows}\PYG{p}{)}
    \PYG{n}{fig}\PYG{o}{.}\PYG{n}{subplots\PYGZus{}adjust}\PYG{p}{(}\PYG{n}{top}\PYG{o}{=}\PYG{l+m+mf}{0.95}\PYG{p}{,} \PYG{n}{bottom}\PYG{o}{=}\PYG{l+m+mf}{0.01}\PYG{p}{,} \PYG{n}{left}\PYG{o}{=}\PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{n}{right}\PYG{o}{=}\PYG{l+m+mf}{0.99}\PYG{p}{)}
    \PYG{n}{axes}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{n}{cmap\PYGZus{}category} \PYG{o}{+} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ colormaps}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{fontsize}\PYG{o}{=}\PYG{l+m+mi}{14}\PYG{p}{)}

    \PYG{k}{for} \PYG{n}{ax}\PYG{p}{,} \PYG{n}{name} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{axes}\PYG{p}{,} \PYG{n}{cmap\PYGZus{}list}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{ax}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{gradient}\PYG{p}{,} \PYG{n}{aspect}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{auto}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{cmap}\PYG{o}{=}\PYG{n}{plt}\PYG{o}{.}\PYG{n}{get\PYGZus{}cmap}\PYG{p}{(}\PYG{n}{name}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{pos} \PYG{o}{=} \PYG{n+nb}{list}\PYG{p}{(}\PYG{n}{ax}\PYG{o}{.}\PYG{n}{get\PYGZus{}position}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{bounds}\PYG{p}{)}
        \PYG{n}{x\PYGZus{}text} \PYG{o}{=} \PYG{n}{pos}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{l+m+mf}{0.01}
        \PYG{n}{y\PYGZus{}text} \PYG{o}{=} \PYG{n}{pos}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{+} \PYG{n}{pos}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{o}{/}\PYG{l+m+mf}{2.}
        \PYG{n}{fig}\PYG{o}{.}\PYG{n}{text}\PYG{p}{(}\PYG{n}{x\PYGZus{}text}\PYG{p}{,} \PYG{n}{y\PYGZus{}text}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{va}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{center}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{ha}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{right}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{fontsize}\PYG{o}{=}\PYG{l+m+mi}{10}\PYG{p}{)}

    \PYG{c+c1}{\PYGZsh{} Turn off *all* ticks \PYGZam{} spines, not just the ones with colormaps.}
    \PYG{k}{for} \PYG{n}{ax} \PYG{o+ow}{in} \PYG{n}{axes}\PYG{p}{:}
        \PYG{n}{ax}\PYG{o}{.}\PYG{n}{set\PYGZus{}axis\PYGZus{}off}\PYG{p}{(}\PYG{p}{)}


\PYG{k}{for} \PYG{n}{cmap\PYGZus{}category}\PYG{p}{,} \PYG{n}{cmap\PYGZus{}list} \PYG{o+ow}{in} \PYG{n}{cmaps}\PYG{o}{.}\PYG{n}{items}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{plot\PYGZus{}color\PYGZus{}gradients}\PYG{p}{(}\PYG{n}{cmap\PYGZus{}category}\PYG{p}{,} \PYG{n}{cmap\PYGZus{}list}\PYG{p}{,} \PYG{n}{nrows}\PYG{p}{)}
    
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_92_0}.png}

\noindent\sphinxincludegraphics{{01-Introduction_92_1}.png}

\noindent\sphinxincludegraphics{{01-Introduction_92_2}.png}

\noindent\sphinxincludegraphics{{01-Introduction_92_3}.png}

\noindent\sphinxincludegraphics{{01-Introduction_92_4}.png}

\noindent\sphinxincludegraphics{{01-Introduction_92_5}.png}

\noindent\sphinxincludegraphics{{01-Introduction_92_6}.png}




\subsection{How are the colors combined}
\label{\detokenize{01-Introduction:how-are-the-colors-combined}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{n}{xlin} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{linspace}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{100}\PYG{p}{)}
\PYG{n}{colors} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Red}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Green}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Blue}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{figure}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{[}\PYG{l+m+mi}{15}\PYG{p}{,}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)} \PYG{p}{:}
    \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplot}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{n}{i}\PYG{o}{+}\PYG{l+m+mi}{1}\PYG{p}{)}

    \PYG{n}{plt}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} 
            \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{hot}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{n}{i}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{hot}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}\PYG{p}{,}\PYG{n}{label}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{hot}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{plt}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} 
            \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{Blues}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{n}{i}\PYG{p}{]}\PYG{p}{,} 
            \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{Blues}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}\PYG{p}{,}\PYG{n}{label}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{blues}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

    \PYG{n}{plt}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} 
            \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{jet}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{n}{i}\PYG{p}{]}\PYG{p}{,} 
            \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{jet}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}\PYG{p}{,}\PYG{n}{label}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{jet}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{n}{plt}\PYG{o}{.}\PYG{n}{xlabel}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
    \PYG{n}{plt}\PYG{o}{.}\PYG{n}{ylabel}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZob{}0\PYGZcb{}}\PYG{l+s+s1}{ Component}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{colors}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_95_0}.png}


\section{Applied LUTs}
\label{\detokenize{01-Introduction:applied-luts}}
\sphinxAtStartPar
These transformations can also be non\sphinxhyphen{}linear as is the case of the graph below where the mapping between the intensity and the color is a \(\log\) relationship meaning the the difference between the lower values is much clearer than the higher ones

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{n}{xlin} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{logspace}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{,} \PYG{l+m+mi}{500}\PYG{p}{)}
\PYG{n}{log\PYGZus{}xlin} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{log10}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{)}
\PYG{n}{norm\PYGZus{}xlin} \PYG{o}{=} \PYG{p}{(}\PYG{n}{log\PYGZus{}xlin}\PYG{o}{\PYGZhy{}}\PYG{n}{log\PYGZus{}xlin}\PYG{o}{.}\PYG{n}{min}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{o}{/}\PYG{p}{(}\PYG{n}{log\PYGZus{}xlin}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)}\PYG{o}{\PYGZhy{}}\PYG{n}{log\PYGZus{}xlin}\PYG{o}{.}\PYG{n}{min}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax1} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}

\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{hot}\PYG{p}{(}\PYG{n}{norm\PYGZus{}xlin}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} 
            \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{hot}\PYG{p}{(}\PYG{n}{norm\PYGZus{}xlin}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{hot}\PYG{p}{(}\PYG{n}{xlin}\PYG{o}{/}\PYG{n}{xlin}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} 
            \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{hot}\PYG{p}{(}\PYG{n}{norm\PYGZus{}xlin}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}xscale}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{log}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}xlabel}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}ylabel}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Red Component}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_97_0}.png}


\subsection{LUTs on real images}
\label{\detokenize{01-Introduction:luts-on-real-images}}
\sphinxAtStartPar
On a real image the difference is even clearer

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{from} \PYG{n+nn}{skimage}\PYG{n+nn}{.}\PYG{n+nn}{io} \PYG{k+kn}{import} \PYG{n}{imread}
\PYG{n}{fig}\PYG{p}{,} \PYG{p}{(}\PYG{n}{ax1}\PYG{p}{,} \PYG{n}{ax2}\PYG{p}{,} \PYG{n}{ax3}\PYG{p}{)} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{12}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{in\PYGZus{}img} \PYG{o}{=} \PYG{n}{imread}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{figures/bone\PYGZhy{}section.png}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{astype}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{float32}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{in\PYGZus{}img}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gray}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{grayscale LUT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}

\PYG{n}{ax2}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{in\PYGZus{}img}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hot}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax2}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hot LUT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}

\PYG{n}{ax3}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{log2}\PYG{p}{(}\PYG{n}{in\PYGZus{}img}\PYG{o}{+}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gray}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax3}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{grayscale\PYGZhy{}log LUT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_99_0}.png}


\section{3D Images}
\label{\detokenize{01-Introduction:d-images}}
\sphinxAtStartPar
For a 3D image, the position or spatial component has a 3rd dimension (z if it is a spatial, or t if it is a movie)



\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.75]{{cube_10x10x10}.pdf}
\caption{Three\sphinxhyphen{}dimensional data can be a volume in space.}\label{\detokenize{01-Introduction:id12}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.75]{{timeseries_visualization}.pdf}
\caption{A movie can also be seen as a three\sphinxhyphen{}dimensional image.}\label{\detokenize{01-Introduction:id13}}\end{figure}


\subsection{A 3D image as array}
\label{\detokenize{01-Introduction:a-3d-image-as-array}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{n}{vol\PYGZus{}image} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{l+m+mi}{27}\PYG{p}{)}\PYG{o}{.}\PYG{n}{reshape}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{vol\PYGZus{}image}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
[[[ 0  1  2]
  [ 3  4  5]
  [ 6  7  8]]

 [[ 9 10 11]
  [12 13 14]
  [15 16 17]]

 [[18 19 20]
  [21 22 23]
  [24 25 26]]]
\end{sphinxVerbatim}


\subsection{Showing 2D slices from volume}
\label{\detokenize{01-Introduction:showing-2d-slices-from-volume}}
\sphinxAtStartPar
This can then be rearranged from a table form into an array form and displayed as a series of slices

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{from} \PYG{n+nn}{skimage}\PYG{n+nn}{.}\PYG{n+nn}{util} \PYG{k+kn}{import} \PYG{n}{montage} \PYG{k}{as} \PYG{n}{montage2d}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{montage2d}\PYG{p}{(}\PYG{n}{vol\PYGZus{}image}\PYG{p}{,} \PYG{n}{fill} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{montage2d}\PYG{p}{(}\PYG{n}{vol\PYGZus{}image}\PYG{p}{,} \PYG{n}{fill} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{jet}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
[[ 0  1  2  9 10 11]
 [ 3  4  5 12 13 14]
 [ 6  7  8 15 16 17]
 [18 19 20  0  0  0]
 [21 22 23  0  0  0]
 [24 25 26  0  0  0]]
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_108_1}.png}


\section{Multiple Values}
\label{\detokenize{01-Introduction:multiple-values}}
\sphinxAtStartPar
In the images thus far, we have had one value per position, but there is no reason there cannot be multiple values. In fact this is what color images are (red, green, and blue) values and even 4 channels with transparency (alpha) as a different. For clarity we call the \sphinxstylestrong{dimensionality} of the image the number of dimensions in the spatial position, and the \sphinxstylestrong{depth} the number in the value.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{base\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{p}{[}\PYG{n+nb}{dict}\PYG{p}{(}\PYG{n}{x} \PYG{o}{=} \PYG{n}{x}\PYG{p}{,} \PYG{n}{y} \PYG{o}{=} \PYG{n}{y}\PYG{p}{)} \PYG{k}{for} \PYG{n}{x}\PYG{p}{,}\PYG{n}{y} \PYG{o+ow}{in} \PYG{n}{product}\PYG{p}{(}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{random}\PYG{o}{.}\PYG{n}{uniform}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{25}\PYG{p}{)}
\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Transparency}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{random}\PYG{o}{.}\PYG{n}{uniform}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{25}\PYG{p}{)}
\PYG{n}{base\PYGZus{}df}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
   x  y  Intensity  Transparency
0  0  0   0.746783      0.607095
1  0  1   0.347202      0.059656
2  0  2   0.866183      0.301186
3  0  3   0.402008      0.258386
4  0  4   0.328629      0.589196
\end{sphinxVerbatim}

\sphinxAtStartPar
This can then be rearranged from a table form into an array form and displayed as a series of slices

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{n}{fig}\PYG{p}{,} \PYG{p}{(}\PYG{n}{ax1}\PYG{p}{,} \PYG{n}{ax2}\PYG{p}{)} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{2}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{gray}\PYG{p}{(}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n}{s} \PYG{o}{=} \PYG{l+m+mi}{1000}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{ax2}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{gray}\PYG{p}{(}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Transparency}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n}{s} \PYG{o}{=} \PYG{l+m+mi}{1000}\PYG{p}{)}
\PYG{n}{ax2}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Transparency}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_113_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{fig}\PYG{p}{,} \PYG{p}{(}\PYG{n}{ax1}\PYG{p}{)} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{cm}\PYG{o}{.}\PYG{n}{jet}\PYG{p}{(}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n}{s} \PYG{o}{=} \PYG{l+m+mi}{1000}\PYG{o}{*}\PYG{n}{base\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Transparency}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Intensity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_114_0}.png}


\section{Hyperspectral Imaging}
\label{\detokenize{01-Introduction:hyperspectral-imaging}}
\sphinxAtStartPar
At each point in the image (black dot), instead of having just a single value, there is an entire spectrum. A selected group of these (red dots) are shown to illustrate the variations inside the sample. While certainly much more complicated, this still constitutes and image and requires the same sort of techniques to process correctly.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k}{as} \PYG{n+nn}{pd}
\PYG{k+kn}{from} \PYG{n+nn}{skimage}\PYG{n+nn}{.}\PYG{n+nn}{io} \PYG{k+kn}{import} \PYG{n}{imread}
\PYG{k+kn}{import} \PYG{n+nn}{os}
\PYG{n}{raw\PYGZus{}img} \PYG{o}{=} \PYG{n}{imread}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{../../common/data/raw.jpg}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{im\PYGZus{}pos} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{../../common/data/impos.csv}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{header} \PYG{o}{=} \PYG{k+kc}{None}\PYG{p}{)}
\PYG{n}{im\PYGZus{}pos}\PYG{o}{.}\PYG{n}{columns} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax1} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{,} \PYG{l+m+mi}{8}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{raw\PYGZus{}img}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{im\PYGZus{}pos}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{im\PYGZus{}pos}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{s} \PYG{o}{=} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{c} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{blue}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_116_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{full\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{../../common/data/full\PYGZus{}img.csv}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{query}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{wavenum\PYGZlt{}1200}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{full\PYGZus{}df}\PYG{o}{.}\PYG{n}{shape}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{rows}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{full\PYGZus{}df}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
210750 rows
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
        x      y  wavenum         val
0  168.95  358.8      750  527.571102
1  168.95  358.8      753  459.778584
2  168.95  358.8      756  406.337255
3  168.95  358.8      759  341.858123
4  168.95  358.8      762  246.645673
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{full\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{g\PYGZus{}x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{cut}\PYG{p}{(}\PYG{n}{full\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{)}
\PYG{n}{full\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{g\PYGZus{}y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{cut}\PYG{p}{(}\PYG{n}{full\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{)}
\PYG{n}{fig}\PYG{p}{,} \PYG{n}{m\PYGZus{}axs} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{9}\PYG{p}{,} \PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{15}\PYG{p}{,} \PYG{l+m+mi}{12}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{m\PYGZus{}axs}\PYG{o}{=}\PYG{n}{m\PYGZus{}axs}\PYG{o}{.}\PYG{n}{ravel}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{for} \PYG{p}{(}\PYG{p}{(}\PYG{n}{g\PYGZus{}x}\PYG{p}{,} \PYG{n}{g\PYGZus{}y}\PYG{p}{)}\PYG{p}{,} \PYG{n}{c\PYGZus{}rows}\PYG{p}{)}\PYG{p}{,} \PYG{n}{c\PYGZus{}ax} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{full\PYGZus{}df}\PYG{o}{.}\PYG{n}{sort\PYGZus{}values}\PYG{p}{(}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{g\PYGZus{}x}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{g\PYGZus{}y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}\PYG{n}{m\PYGZus{}axs}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{c\PYGZus{}ax}\PYG{o}{.}\PYG{n}{plot}\PYG{p}{(}\PYG{n}{c\PYGZus{}rows}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{wavenum}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c\PYGZus{}rows}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{val}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_118_0}.png}


\chapter{Image Formation}
\label{\detokenize{01-Introduction:image-formation}}
\sphinxAtStartPar
The image formation process is the process to use some kind of excitation or impulse probe a sample. This requires the interaction of four parts.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{image-formation}.pdf}
\caption{The parts involved in the image formation process probing a sample.}\label{\detokenize{01-Introduction:id14}}\end{figure}


\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Impulses} Light, X\sphinxhyphen{}Rays, Electrons, A sharp point, Magnetic field, Sound wave

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Characteristics} Electron Shell Levels, Electron Density, Phonons energy levels, Electronic, Spins, Molecular mobility

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Response} Absorption, Reflection, Phase Shift, Scattering, Emission

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Detection} Your eye, Light sensitive film, CCD / CMOS, Scintillator, Transducer

\end{itemize}


\section{Where do images come from?}
\label{\detokenize{01-Introduction:where-do-images-come-from}}

\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
Modality
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Impulse
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Characteristic
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Response
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Detection
\\
\hline
\sphinxAtStartPar
Light Microscopy
&
\sphinxAtStartPar
White Light
&
\sphinxAtStartPar
Electronic interactions
&
\sphinxAtStartPar
Absorption
&
\sphinxAtStartPar
Film, Camera
\\
\hline
\sphinxAtStartPar
Phase Contrast
&
\sphinxAtStartPar
Coherent light
&
\sphinxAtStartPar
Electron Density (Index of Refraction)
&
\sphinxAtStartPar
Phase Shift
&
\sphinxAtStartPar
Phase stepping, holography, Zernike
\\
\hline
\sphinxAtStartPar
Confocal Microscopy
&
\sphinxAtStartPar
Laser Light
&
\sphinxAtStartPar
Electronic Transition in Fluorescence Molecule
&
\sphinxAtStartPar
Absorption and reemission
&
\sphinxAtStartPar
Pinhole in focal plane, scanning detection
\\
\hline
\sphinxAtStartPar
X\sphinxhyphen{}Ray Radiography
&
\sphinxAtStartPar
X\sphinxhyphen{}Ray light
&
\sphinxAtStartPar
Photo effect and Compton scattering
&
\sphinxAtStartPar
Absorption and scattering
&
\sphinxAtStartPar
Scintillator, microscope, camera
\\
\hline
\sphinxAtStartPar
Neutron Radiography
&
\sphinxAtStartPar
Neutrons
&
\sphinxAtStartPar
Interaction with nucleus
&
\sphinxAtStartPar
Scattering and absorption
&
\sphinxAtStartPar
Scintillator, optics, camera
\\
\hline
\sphinxAtStartPar
Ultrasound
&
\sphinxAtStartPar
High frequency sound waves
&
\sphinxAtStartPar
Molecular mobility
&
\sphinxAtStartPar
Reflection and Scattering
&
\sphinxAtStartPar
Transducer
\\
\hline
\sphinxAtStartPar
MRI
&
\sphinxAtStartPar
Radio\sphinxhyphen{}frequency EM
&
\sphinxAtStartPar
Unmatched Hydrogen spins
&
\sphinxAtStartPar
Absorption and reemission
&
\sphinxAtStartPar
RF coils to detect
\\
\hline
\sphinxAtStartPar
Atomic Force Microscopy
&
\sphinxAtStartPar
Sharp Point
&
\sphinxAtStartPar
Surface Contact
&
\sphinxAtStartPar
Contact, Repulsion
&
\sphinxAtStartPar
Deflection of a tiny mirror
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\chapter{Acquiring Images}
\label{\detokenize{01-Introduction:acquiring-images}}

\section{Traditional / Direct imaging}
\label{\detokenize{01-Introduction:traditional-direct-imaging}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Visible images produced or can be easily made visible

\item {} 
\sphinxAtStartPar
Optical imaging, microscopy

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{bone\PYGZus{}img}  \PYG{o}{=} \PYG{n}{imread}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{figures/tiny\PYGZhy{}bone.png}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{astype}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{float32}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} simulate measured image}
\PYG{n}{conv\PYGZus{}kern} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{pad}\PYG{p}{(}\PYG{n}{disk}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{constant}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{constant\PYGZus{}values} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{)}
\PYG{n}{meas\PYGZus{}img}  \PYG{o}{=} \PYG{n}{convolve}\PYG{p}{(}\PYG{n}{bone\PYGZus{}img}\PYG{p}{[}\PYG{p}{:}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{conv\PYGZus{}kern}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} run deconvolution}
\PYG{n}{dekern}    \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{fft}\PYG{o}{.}\PYG{n}{ifft2}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{o}{/}\PYG{n}{np}\PYG{o}{.}\PYG{n}{fft}\PYG{o}{.}\PYG{n}{fft2}\PYG{p}{(}\PYG{n}{conv\PYGZus{}kern}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{rec\PYGZus{}img}   \PYG{o}{=} \PYG{n}{convolve}\PYG{p}{(}\PYG{n}{meas\PYGZus{}img}\PYG{p}{,} \PYG{n}{dekern}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{p}{:}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}
\PYG{c+c1}{\PYGZsh{} show result}
\PYG{n}{fig}\PYG{p}{,} \PYG{p}{(}\PYG{n}{ax\PYGZus{}orig}\PYG{p}{,} \PYG{n}{ax1}\PYG{p}{,} \PYG{n}{ax2}\PYG{p}{)} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{15}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{ax\PYGZus{}orig}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{bone\PYGZus{}img}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;} \PYG{n}{ax\PYGZus{}orig}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Original Object}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{real}\PYG{p}{(}\PYG{n}{meas\PYGZus{}img}\PYG{p}{)}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;} \PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Measurement}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

\PYG{n}{ax2}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{real}\PYG{p}{(}\PYG{n}{rec\PYGZus{}img}\PYG{p}{)}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{vmin} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{vmax} \PYG{o}{=} \PYG{l+m+mi}{255}\PYG{p}{)}\PYG{p}{;} \PYG{n}{ax2}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Reconstructed}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_124_0}.png}


\section{Indirect / Computational imaging}
\label{\detokenize{01-Introduction:indirect-computational-imaging}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Recorded information does not resemble object

\item {} 
\sphinxAtStartPar
Response must be transformed (usually computationally) to produce an image

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{bone\PYGZus{}img} \PYG{o}{=} \PYG{n}{imread}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{figures/tiny\PYGZhy{}bone.png}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{astype}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{float32}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} simulate measured image}
\PYG{n}{meas\PYGZus{}img} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{log10}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{abs}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{fft}\PYG{o}{.}\PYG{n}{fftshift}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{fft}\PYG{o}{.}\PYG{n}{fft2}\PYG{p}{(}\PYG{n}{bone\PYGZus{}img}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{meas\PYGZus{}img}\PYG{o}{.}\PYG{n}{min}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{meas\PYGZus{}img}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{meas\PYGZus{}img}\PYG{o}{.}\PYG{n}{mean}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{fig}\PYG{p}{,} \PYG{p}{(}\PYG{n}{ax1}\PYG{p}{,} \PYG{n}{ax\PYGZus{}orig}\PYG{p}{)} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,} 
                               \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{12}\PYG{p}{,} \PYG{l+m+mi}{6}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{ax\PYGZus{}orig}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{bone\PYGZus{}img}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{ax\PYGZus{}orig}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Original Object}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{imshow}\PYG{p}{(}\PYG{n}{meas\PYGZus{}img}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hot}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{set\PYGZus{}title}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Measurement}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
1.146423838816545 6.61125552595089 3.3563935033662253
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_126_1}.png}


\section{Traditional Imaging}
\label{\detokenize{01-Introduction:traditional-imaging}}





\section{Traditional Imaging: Model}
\label{\detokenize{01-Introduction:traditional-imaging-model}}
\sphinxAtStartPar
\sphinxincludegraphics{{traditional-image-flow}.png}
\begin{equation*}
\begin{split}
\left[\left([b(x,y)*s_{ab}(x,y)]\otimes h_{fs}(x,y)\right)*h_{op}(x,y)\right]*h_{det}(x,y)+d_{dark}(x,y)
\end{split}
\end{equation*}
\sphinxAtStartPar
\(s_{ab}\) is the only information you are really interested in, so it is important to remove or correct for the other components

\sphinxAtStartPar
For color (non\sphinxhyphen{}monochromatic) images the problem becomes even more complicated
\$\(
\int_{0}^{\infty} {\left[\left([b(x,y,\lambda)*s_{ab}(x,y,\lambda)]\otimes h_{fs}(x,y,\lambda)\right)*h_{op}(x,y,\lambda)\right]*h_{det}(x,y,\lambda)}\mathrm{d}\lambda+d_{dark}(x,y)
\)\$


\section{Indirect Imaging (Computational Imaging)}
\label{\detokenize{01-Introduction:indirect-imaging-computational-imaging}}

\begin{itemize}
\item {} 
\sphinxAtStartPar
Tomography through projections

\item {} 
\sphinxAtStartPar
Microlenses \sphinxhref{https://en.wikipedia.org/wiki/Light-field\_camera}{Light\sphinxhyphen{}field photography}

\end{itemize}


\begin{itemize}
\item {} 
\sphinxAtStartPar
Diffraction patterns

\item {} 
\sphinxAtStartPar
Hyperspectral imaging with Raman, IR, CARS

\item {} 
\sphinxAtStartPar
Surface Topography with cantilevers (AFM)

\end{itemize}




\section{Image Analysis}
\label{\detokenize{01-Introduction:image-analysis}}

\begin{itemize}
\item {} 
\sphinxAtStartPar
An image is a bucket of pixels.

\item {} 
\sphinxAtStartPar
How you choose to turn it into useful information is strongly dependent on your background

\end{itemize}


\section{Image Analysis: Experimentalist}
\label{\detokenize{01-Introduction:image-analysis-experimentalist}}



\subsection{Characteristics}
\label{\detokenize{01-Introduction:characteristics}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Problem\sphinxhyphen{}driven

\item {} 
\sphinxAtStartPar
Top\sphinxhyphen{}down

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{Reality} Model\sphinxhyphen{}based

\end{itemize}


\subsection{Examples}
\label{\detokenize{01-Introduction:examples}}\begin{itemize}
\item {} 
\sphinxAtStartPar
cell counting

\item {} 
\sphinxAtStartPar
porosity

\end{itemize}




\section{Image Analysis: Computer Vision Approaches}
\label{\detokenize{01-Introduction:image-analysis-computer-vision-approaches}}



\subsection{Characteristics}
\label{\detokenize{01-Introduction:id1}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Method\sphinxhyphen{}driven

\item {} 
\sphinxAtStartPar
Feature\sphinxhyphen{}based

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{Image} Model\sphinxhyphen{}based

\item {} 
\sphinxAtStartPar
Engineer features for solving problems

\end{itemize}


\subsection{Examples}
\label{\detokenize{01-Introduction:id2}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Edge detection

\item {} 
\sphinxAtStartPar
Face detection

\end{itemize}




\section{Image Analysis: Deep Learning Approach}
\label{\detokenize{01-Introduction:image-analysis-deep-learning-approach}}



\subsection{Characteristics}
\label{\detokenize{01-Introduction:id3}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Results\sphinxhyphen{}driven

\item {} 
\sphinxAtStartPar
Biology ‘inspired’

\item {} 
\sphinxAtStartPar
Build both image processing and analysis from scratch

\end{itemize}


\subsection{Examples}
\label{\detokenize{01-Introduction:id4}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Captioning images

\item {} 
\sphinxAtStartPar
Identifying unusual events

\end{itemize}




\chapter{On Science}
\label{\detokenize{01-Introduction:on-science}}

\section{What is the purpose?}
\label{\detokenize{01-Introduction:what-is-the-purpose}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Discover and validate new knowledge

\end{itemize}


\subsection{How?}
\label{\detokenize{01-Introduction:how}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Use the scientific method as an approach to convince other people

\item {} 
\sphinxAtStartPar
Build on the results of others so we don’t start from the beginning

\end{itemize}


\subsection{Important Points}
\label{\detokenize{01-Introduction:important-points}}\begin{itemize}
\item {} 
\sphinxAtStartPar
While \sphinxstylestrong{qualitative} assessment is important, it is difficult to reliably produce and scale

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Quantitative} analysis is far from perfect, but provides metrics which can be compared and regenerated by anyone

\end{itemize}

\sphinxAtStartPar
Inspired by: \sphinxhref{http://www.slideshare.net/CurtisRueden/imagej-and-the-scijava-software-stack}{imagej\sphinxhyphen{}pres}


\section{Science and Imaging}
\label{\detokenize{01-Introduction:science-and-imaging}}
\sphinxAtStartPar
Images are great for qualitative analyses since our brains can quickly interpret them without large \sphinxstyleemphasis{programming} investements.


\subsection{Proper processing and quantitative analysis is however much more difficult with images.}
\label{\detokenize{01-Introduction:proper-processing-and-quantitative-analysis-is-however-much-more-difficult-with-images}}\begin{itemize}
\item {} 
\sphinxAtStartPar
If you measure a temperature, quantitative analysis is easy, \(50K\).

\item {} 
\sphinxAtStartPar
If you measure an image it is much more difficult and much more prone to mistakes, subtle setup variations, and confusing analyses

\end{itemize}


\subsection{Furthermore in image processing there is a plethora of tools available}
\label{\detokenize{01-Introduction:furthermore-in-image-processing-there-is-a-plethora-of-tools-available}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Thousands of algorithms available

\item {} 
\sphinxAtStartPar
Thousands of tools

\item {} 
\sphinxAtStartPar
Many images require multi\sphinxhyphen{}step processing

\item {} 
\sphinxAtStartPar
Experimenting is time\sphinxhyphen{}consuming

\end{itemize}


\section{Why quantitative?}
\label{\detokenize{01-Introduction:why-quantitative}}

\subsection{Human eyes have issues}
\label{\detokenize{01-Introduction:human-eyes-have-issues}}
\sphinxAtStartPar
Which center square seems brighter?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{n}{xlin} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{linspace}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{3}\PYG{p}{)}
\PYG{n}{xx}\PYG{p}{,} \PYG{n}{yy} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{meshgrid}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} \PYG{n}{xlin}\PYG{p}{)}
\PYG{n}{img\PYGZus{}a} \PYG{o}{=} \PYG{l+m+mi}{25}\PYG{o}{*}\PYG{n}{np}\PYG{o}{.}\PYG{n}{ones}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{img\PYGZus{}b} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{ones}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{)}\PYG{o}{*}\PYG{l+m+mi}{75}
\PYG{n}{img\PYGZus{}a}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{img\PYGZus{}b}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{fig}\PYG{p}{,} \PYG{p}{(}\PYG{n}{ax1}\PYG{p}{,} \PYG{n}{ax2}\PYG{p}{)} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{12}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{img\PYGZus{}a}\PYG{p}{,} \PYG{n}{vmin} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{vmax} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{ax2}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{img\PYGZus{}b}\PYG{p}{,} \PYG{n}{vmin} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{vmax} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_137_0}.png}


\section{Intensity gradients}
\label{\detokenize{01-Introduction:intensity-gradients}}
\sphinxAtStartPar
Are the intensities constant in the image?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{n}{xlin} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{linspace}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{10}\PYG{p}{)}
\PYG{n}{xx}\PYG{p}{,} \PYG{n}{yy} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{meshgrid}\PYG{p}{(}\PYG{n}{xlin}\PYG{p}{,} \PYG{n}{xlin}\PYG{p}{)}

\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax1} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{6}\PYG{p}{,} \PYG{l+m+mi}{6}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{matshow}\PYG{p}{(}\PYG{n}{xx}\PYG{p}{,} \PYG{n}{vmin} \PYG{o}{=} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{vmax} \PYG{o}{=} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{cmap} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bone}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}matplotlib.image.AxesImage at 0x1c5b4853d0\PYGZgt{}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_139_1}.png}


\section{Reproducibility vs. Repeatability}
\label{\detokenize{01-Introduction:reproducibility-vs-repeatability}}

\subsection{Reproducibility}
\label{\detokenize{01-Introduction:reproducibility}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.75]{{reproducibility}.pdf}
\caption{A workflow describing the concept of reproducibility.}\label{\detokenize{01-Introduction:id15}}\end{figure}




\subsection{Repeatability}
\label{\detokenize{01-Introduction:repeatability}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[scale=0.75]{{repeatability}.pdf}
\caption{A workflow describing the concept of reproducibility.}\label{\detokenize{01-Introduction:id16}}\end{figure}




\section{Reproducibility vs. Repeatability}
\label{\detokenize{01-Introduction:id5}}
\sphinxAtStartPar
Science demands \sphinxstylestrong{repeatability}! and really wants \sphinxstylestrong{reproducability}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Experimental conditions can change rapidly and are difficult to make consistent

\item {} 
\sphinxAtStartPar
Animal and human studies are prohibitively time consuming and expensive to reproduce

\item {} 
\sphinxAtStartPar
Terabyte datasets cannot be easily passed around many different groups

\item {} 
\sphinxAtStartPar
Privacy concerns can also limit sharing and access to data

\end{itemize}


\bigskip\hrule\bigskip

\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{Science} is already difficult enough

\item {} 
\sphinxAtStartPar
Image processing makes it even more complicated

\item {} 
\sphinxAtStartPar
Many image processing tasks are multistep, have many parameters, use a variety of tools, and consume a very long time

\end{itemize}


\section{How can we keep track of everything for ourselves and others?}
\label{\detokenize{01-Introduction:how-can-we-keep-track-of-everything-for-ourselves-and-others}}\begin{itemize}
\item {} 
\sphinxAtStartPar
We can make the data analysis easy to repeat by an independent 3rd party

\item {} 
\sphinxAtStartPar
Document the analysis steps

\item {} 
\sphinxAtStartPar
Write clear and understandable code

\end{itemize}


\chapter{Computing has changed: Parallel}
\label{\detokenize{01-Introduction:computing-has-changed-parallel}}

\section{Moores Law}
\label{\detokenize{01-Introduction:moores-law}}\begin{equation*}
\begin{split} \textrm{Transistors} \propto 2^{T/(\textrm{18 months})} \end{split}
\end{equation*}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{k}{matplotlib} inline
\PYG{c+c1}{\PYGZsh{} stolen from https://gist.github.com/humberto\PYGZhy{}ortiz/de4b3a621602b78bf90d}
\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k}{as} \PYG{n+nn}{pd}
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{from} \PYG{n+nn}{io} \PYG{k+kn}{import} \PYG{n}{StringIO}
\PYG{n}{moores\PYGZus{}txt}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Id Name  Year  Count(1000s)  Clock(MHz)}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0            MOS65XX  1975           3.51           14}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1          Intel8086  1978          29.00           10}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{2          MIPSR3000  1988         120.00           33}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{3           AMDAm486  1993        1200.00           40}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{4        NexGenNx586  1994        3500.00          111}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{5          AMDAthlon  1999       37000.00         1400}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{6   IntelPentiumIII  1999       44000.00         1400}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{7         PowerPC970  2002       58000.00         2500}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{8       AMDAthlon64  2003      243000.00         2800}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{9    IntelCore2Duo  2006      410000.00         3330}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{10         AMDPhenom  2007      450000.00         2600}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{11      IntelCorei7  2008     1170000.00         3460}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{12      IntelCorei5  2009      995000.00         3600}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}

\PYG{n}{sio\PYGZus{}table} \PYG{o}{=} \PYG{n}{StringIO}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{moores\PYGZus{}txt}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{moore\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}table}\PYG{p}{(}\PYG{n}{sio\PYGZus{}table}\PYG{p}{,} \PYG{n}{sep} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZbs{}}\PYG{l+s+s1}{s+}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{index\PYGZus{}col} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax1} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{figsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;} \PYG{n}{ax1}\PYG{o}{.}\PYG{n}{semilogy}\PYG{p}{(}\PYG{n}{moore\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Year}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{moore\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Count(1000s)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{b.\PYGZhy{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{label} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{1000s of transitiors}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;} \PYG{n}{ax1}\PYG{o}{.}\PYG{n}{semilogy}\PYG{p}{(}\PYG{n}{moore\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Year}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{moore\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Clock(MHz)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r.\PYGZhy{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{label} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Clockspeed (MHz)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{p}{;}\PYG{n}{ax1}\PYG{o}{.}\PYG{n}{legend}\PYG{p}{(}\PYG{n}{loc} \PYG{o}{=} \PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_148_0}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Based on data from \sphinxurl{https://gist.github.com/humberto-ortiz/de4b3a621602b78bf90d}}


\bigskip\hrule\bigskip


\sphinxAtStartPar
There are now many more transistors inside a single computer but the processing speed hasn’t increased. How can this be?
\begin{itemize}
\item {} 
\sphinxAtStartPar
Multiple Core

\item {} 
\sphinxAtStartPar
Many machines have multiple cores for each processor which can perform tasks independently

\item {} 
\sphinxAtStartPar
Multiple CPUs

\item {} 
\sphinxAtStartPar
More than one chip is commonly present

\item {} 
\sphinxAtStartPar
New modalities
\begin{itemize}
\item {} 
\sphinxAtStartPar
GPUs provide many cores which operate at slow speed

\end{itemize}

\end{itemize}


\subsection{\protect\(\rightarrow\protect\) Parallel Code is important}
\label{\detokenize{01-Introduction:rightarrow-parallel-code-is-important}}

\section{Computing has changed: Cloud}
\label{\detokenize{01-Introduction:computing-has-changed-cloud}}

\begin{itemize}
\item {} 
\sphinxAtStartPar
Computer, servers, workstations are \sphinxstyleemphasis{wildly underused} (majority are \textless{}50\%)

\item {} 
\sphinxAtStartPar
Buying a big computer that sits \sphinxstyleemphasis{idle most of the time} is a waste of money
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxurl{http://www-inst.eecs.berkeley.edu/~cs61c/sp14/}

\item {} 
\sphinxAtStartPar
“The Case for Energy\sphinxhyphen{}Proportional Computing,” Luiz André Barroso, Urs Hölzle, IEEE Computer, December 2007

\end{itemize}

\item {} 
\sphinxAtStartPar
Traditionally the most important performance criteria was time, how fast can it be done

\item {} 
\sphinxAtStartPar
With Platform as a service servers can be \sphinxstyleemphasis{rented instead of bought}

\item {} 
\sphinxAtStartPar
Speed is still important but using cloud computing \$ / Sample is the real metric

\item {} 
\sphinxAtStartPar
In Switzerland a PhD student is 400x as expensive per hour as an Amazon EC2 Machine

\item {} 
\sphinxAtStartPar
Many competitors keep prices low and offer flexibility

\end{itemize}




\section{Cloud Computing Costs}
\label{\detokenize{01-Introduction:cloud-computing-costs}}
\sphinxAtStartPar
The figure shows the range of cloud costs (determined by peak usage) compared to a local workstation with utilization shown as the average number of hours the computer is used each week.


\section{Cloud: Equal Cost Point}
\label{\detokenize{01-Introduction:cloud-equal-cost-point}}
\sphinxAtStartPar
Here the equal cost point is shown where the cloud and local workstations have the same cost. The x\sphinxhyphen{}axis is the percentage of resources used at peak\sphinxhyphen{}time and the y shows the expected usable lifetime of the computer. The color indicates the utilization percentage and the text on the squares shows this as the numbers of hours used in a week.


\chapter{Soup/Recipe Example}
\label{\detokenize{01-Introduction:soup-recipe-example}}

\section{Simple Soup}
\label{\detokenize{01-Introduction:simple-soup}}
\sphinxAtStartPar
Easy to follow the list, anyone with the right steps can execute and repeat (if not reproduce) the soup
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Buy \{carrots, peas, tomatoes\} at market

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Buy meat at butcher

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Chop carrots into pieces

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Chop potatos into pieces

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Heat water

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Wait until boiling then add chopped vegetables

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Wait 5 minutes and add meat

\end{enumerate}


\section{More complicated soup}
\label{\detokenize{01-Introduction:more-complicated-soup}}
\sphinxAtStartPar
Here it is harder to follow and you need to carefully keep track of what is being performed


\subsection{Steps 1\sphinxhyphen{}4}
\label{\detokenize{01-Introduction:steps-1-4}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Mix carrots with potatos \(\rightarrow  mix_1\)

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} add egg to \(mix_1\) and fry for 20 minutes

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Tenderize meat for 20 minutes

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} add tomatoes to meat and cook for 10 minutes \(\rightarrow mix_2\)

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Wait until boiling then add \(mix_1\)

\item {} 
\sphinxAtStartPar
\sphinxstyleemphasis{then} Wait 5 minutes and add \(mix_2\)

\end{enumerate}


\chapter{Using flow charts / workflows}
\label{\detokenize{01-Introduction:using-flow-charts-workflows}}

\section{Simple Soup}
\label{\detokenize{01-Introduction:id6}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{IPython}\PYG{n+nn}{.}\PYG{n+nn}{display} \PYG{k+kn}{import} \PYG{n}{SVG}
\PYG{k+kn}{import} \PYG{n+nn}{pydot}
\PYG{n}{graph} \PYG{o}{=} \PYG{n}{pydot}\PYG{o}{.}\PYG{n}{Dot}\PYG{p}{(}\PYG{n}{graph\PYGZus{}type}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{digraph}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{rankdir}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{node\PYGZus{}names} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Buy}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{vegetables}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Buy meat}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Chop}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{vegetables}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Heat water}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Vegetables}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Wait for}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{boiling}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Wait 5}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{add meat}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
\PYG{n}{nodes} \PYG{o}{=} \PYG{p}{[}\PYG{n}{pydot}\PYG{o}{.}\PYG{n}{Node}\PYG{p}{(}\PYG{n}{name} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}04d}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n}{i}\PYG{p}{,} \PYG{n}{label} \PYG{o}{=} \PYG{n}{c\PYGZus{}n}\PYG{p}{)} 
         \PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{c\PYGZus{}n} \PYG{o+ow}{in} \PYG{n+nb}{enumerate}\PYG{p}{(}\PYG{n}{node\PYGZus{}names}\PYG{p}{)}\PYG{p}{]}
\PYG{k}{for} \PYG{n}{c\PYGZus{}n} \PYG{o+ow}{in} \PYG{n}{nodes}\PYG{p}{:}
    \PYG{n}{graph}\PYG{o}{.}\PYG{n}{add\PYGZus{}node}\PYG{p}{(}\PYG{n}{c\PYGZus{}n}\PYG{p}{)}
    
\PYG{k}{for} \PYG{p}{(}\PYG{n}{c\PYGZus{}n}\PYG{p}{,} \PYG{n}{d\PYGZus{}n}\PYG{p}{)} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{nodes}\PYG{p}{,} \PYG{n}{nodes}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{graph}\PYG{o}{.}\PYG{n}{add\PYGZus{}edge}\PYG{p}{(}\PYG{n}{pydot}\PYG{o}{.}\PYG{n}{Edge}\PYG{p}{(}\PYG{n}{c\PYGZus{}n}\PYG{p}{,} \PYG{n}{d\PYGZus{}n}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{SVG}\PYG{p}{(}\PYG{n}{graph}\PYG{o}{.}\PYG{n}{create\PYGZus{}svg}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}IPython.core.display.SVG object\PYGZgt{}
\end{sphinxVerbatim}


\section{Workflows}
\label{\detokenize{01-Introduction:workflows}}
\sphinxAtStartPar
Clearly a linear set of instructions is ill\sphinxhyphen{}suited for even a fairly easy soup, it is then even more difficult when there are dozens of steps and different pathsways


\bigskip\hrule\bigskip


\sphinxAtStartPar
Furthermore a clean workflow allows you to better parallelize the task since it is clear which tasks can be performed independently

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{IPython}\PYG{n+nn}{.}\PYG{n+nn}{display} \PYG{k+kn}{import} \PYG{n}{SVG}
\PYG{k+kn}{import} \PYG{n+nn}{pydot}
\PYG{n}{graph} \PYG{o}{=} \PYG{n}{pydot}\PYG{o}{.}\PYG{n}{Dot}\PYG{p}{(}\PYG{n}{graph\PYGZus{}type}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{digraph}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{rankdir}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{node\PYGZus{}names} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Buy}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{vegetables}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Buy meat}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Chop}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{vegetables}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Heat water}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Add Vegetables}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Wait for}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{boiling}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Wait 5}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{add meat}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
\PYG{n}{nodes} \PYG{o}{=} \PYG{p}{[}\PYG{n}{pydot}\PYG{o}{.}\PYG{n}{Node}\PYG{p}{(}\PYG{n}{name} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}04d}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n}{i}\PYG{p}{,} \PYG{n}{label} \PYG{o}{=} \PYG{n}{c\PYGZus{}n}\PYG{p}{,} \PYG{n}{style} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{filled}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} 
         \PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{c\PYGZus{}n} \PYG{o+ow}{in} \PYG{n+nb}{enumerate}\PYG{p}{(}\PYG{n}{node\PYGZus{}names}\PYG{p}{)}\PYG{p}{]}
\PYG{k}{for} \PYG{n}{c\PYGZus{}n} \PYG{o+ow}{in} \PYG{n}{nodes}\PYG{p}{:}
    \PYG{n}{graph}\PYG{o}{.}\PYG{n}{add\PYGZus{}node}\PYG{p}{(}\PYG{n}{c\PYGZus{}n}\PYG{p}{)}
    
\PYG{k}{def} \PYG{n+nf}{e}\PYG{p}{(}\PYG{n}{i}\PYG{p}{,}\PYG{n}{j}\PYG{p}{,} \PYG{n}{col} \PYG{o}{=} \PYG{k+kc}{None}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{col} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{k+kc}{None}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{c} \PYG{o+ow}{in} \PYG{p}{[}\PYG{n}{i}\PYG{p}{,}\PYG{n}{j}\PYG{p}{]}\PYG{p}{:}
            \PYG{k}{if} \PYG{n}{nodes}\PYG{p}{[}\PYG{n}{c}\PYG{p}{]}\PYG{o}{.}\PYG{n}{get\PYGZus{}fillcolor}\PYG{p}{(}\PYG{p}{)} \PYG{o+ow}{is} \PYG{k+kc}{None}\PYG{p}{:} 
                \PYG{n}{nodes}\PYG{p}{[}\PYG{n}{c}\PYG{p}{]}\PYG{o}{.}\PYG{n}{set\PYGZus{}fillcolor}\PYG{p}{(}\PYG{n}{col}\PYG{p}{)}
    \PYG{n}{graph}\PYG{o}{.}\PYG{n}{add\PYGZus{}edge}\PYG{p}{(}\PYG{n}{pydot}\PYG{o}{.}\PYG{n}{Edge}\PYG{p}{(}\PYG{n}{nodes}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{,} \PYG{n}{nodes}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{e}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gold}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;} \PYG{n}{e}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{;} \PYG{n}{e}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{springgreen}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;} \PYG{n}{e}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{orange}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{;} \PYG{n}{e}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{)} \PYG{p}{;} \PYG{n}{e}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{dodgerblue}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

\PYG{n}{SVG}\PYG{p}{(}\PYG{n}{graph}\PYG{o}{.}\PYG{n}{create\PYGZus{}svg}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}IPython.core.display.SVG object\PYGZgt{}
\end{sphinxVerbatim}


\chapter{Directed Acyclical Graphs (DAG)}
\label{\detokenize{01-Introduction:directed-acyclical-graphs-dag}}
\sphinxAtStartPar
We can represent almost any computation without loops as DAG. What this allows us to do is now break down a computation into pieces which can be carried out independently. There are a number of tools which let us handle this issue.
\begin{itemize}
\item {} 
\sphinxAtStartPar
PyData Dask \sphinxhyphen{} \sphinxurl{https://dask.pydata.org/en/latest/}

\item {} 
\sphinxAtStartPar
Apache Spark \sphinxhyphen{} \sphinxurl{https://spark.apache.org/}

\item {} 
\sphinxAtStartPar
Spotify Luigi \sphinxhyphen{} \sphinxurl{https://github.com/spotify/luigi}

\item {} 
\sphinxAtStartPar
Airflow \sphinxhyphen{} \sphinxurl{https://airflow.apache.org/}

\item {} 
\sphinxAtStartPar
KNIME \sphinxhyphen{} \sphinxurl{https://www.knime.com/}

\item {} 
\sphinxAtStartPar
Google Tensorflow \sphinxhyphen{} \sphinxurl{https://www.tensorflow.org/}

\item {} 
\sphinxAtStartPar
Pytorch / Torch \sphinxhyphen{} \sphinxurl{http://pytorch.org/}

\end{itemize}


\chapter{Concrete example}
\label{\detokenize{01-Introduction:concrete-example}}
\sphinxAtStartPar
What is a DAG good for?

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{dask}\PYG{n+nn}{.}\PYG{n+nn}{array} \PYG{k}{as} \PYG{n+nn}{da}

\PYG{k+kn}{from} \PYG{n+nn}{dask}\PYG{n+nn}{.}\PYG{n+nn}{dot} \PYG{k+kn}{import} \PYG{n}{dot\PYGZus{}graph}
\PYG{n}{image\PYGZus{}1} \PYG{o}{=} \PYG{n}{da}\PYG{o}{.}\PYG{n}{zeros}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{,} \PYG{n}{chunks} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{image\PYGZus{}2} \PYG{o}{=} \PYG{n}{da}\PYG{o}{.}\PYG{n}{ones}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{,} \PYG{n}{chunks} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}1}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_162_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{image\PYGZus{}3} \PYG{o}{=} \PYG{n}{image\PYGZus{}1} \PYG{o}{+} \PYG{n}{image\PYGZus{}2}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}3}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_163_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{image\PYGZus{}4} \PYG{o}{=} \PYG{p}{(}\PYG{n}{image\PYGZus{}1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{o}{+} \PYG{p}{(}\PYG{n}{image\PYGZus{}2}\PYG{o}{*}\PYG{l+m+mi}{50}\PYG{p}{)}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}4}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_164_0}.png}


\chapter{Let’s go big}
\label{\detokenize{01-Introduction:let-s-go-big}}
\sphinxAtStartPar
Now let’s see where this can be really useful

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{dask}\PYG{n+nn}{.}\PYG{n+nn}{array} \PYG{k}{as} \PYG{n+nn}{da}
\PYG{k+kn}{from} \PYG{n+nn}{dask}\PYG{n+nn}{.}\PYG{n+nn}{dot} \PYG{k+kn}{import} \PYG{n}{dot\PYGZus{}graph}
\PYG{n}{image\PYGZus{}1} \PYG{o}{=} \PYG{n}{da}\PYG{o}{.}\PYG{n}{zeros}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{1024}\PYG{p}{,} \PYG{l+m+mi}{1024}\PYG{p}{)}\PYG{p}{,} \PYG{n}{chunks} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{512}\PYG{p}{,} \PYG{l+m+mi}{512}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{image\PYGZus{}2} \PYG{o}{=} \PYG{n}{da}\PYG{o}{.}\PYG{n}{ones}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{1024} \PYG{p}{,}\PYG{l+m+mi}{1024}\PYG{p}{)}\PYG{p}{,} \PYG{n}{chunks} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{512}\PYG{p}{,} \PYG{l+m+mi}{512}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}1}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_166_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{image\PYGZus{}4} \PYG{o}{=} \PYG{p}{(}\PYG{n}{image\PYGZus{}1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{o}{+} \PYG{p}{(}\PYG{n}{image\PYGZus{}2}\PYG{o}{*}\PYG{l+m+mi}{50}\PYG{p}{)}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}4}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_167_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{image\PYGZus{}5} \PYG{o}{=} \PYG{n}{da}\PYG{o}{.}\PYG{n}{matmul}\PYG{p}{(}\PYG{n}{image\PYGZus{}1}\PYG{p}{,} \PYG{n}{image\PYGZus{}2}\PYG{p}{)}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}5}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_168_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{image\PYGZus{}6} \PYG{o}{=} \PYG{p}{(}\PYG{n}{da}\PYG{o}{.}\PYG{n}{matmul}\PYG{p}{(}\PYG{n}{image\PYGZus{}1}\PYG{p}{,} \PYG{n}{image\PYGZus{}2}\PYG{p}{)}\PYG{o}{+}\PYG{n}{image\PYGZus{}1}\PYG{p}{)}\PYG{o}{*}\PYG{n}{image\PYGZus{}2}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}6}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_169_0}.png}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{dask\PYGZus{}ndfilters} \PYG{k}{as} \PYG{n+nn}{da\PYGZus{}ndfilt}
\PYG{n}{image\PYGZus{}7} \PYG{o}{=} \PYG{n}{da\PYGZus{}ndfilt}\PYG{o}{.}\PYG{n}{convolve}\PYG{p}{(}\PYG{n}{image\PYGZus{}6}\PYG{p}{,} \PYG{n}{image\PYGZus{}1}\PYG{p}{)}
\PYG{n}{dot\PYGZus{}graph}\PYG{p}{(}\PYG{n}{image\PYGZus{}7}\PYG{o}{.}\PYG{n}{dask}\PYG{p}{)}
\end{sphinxVerbatim}

\noindent\sphinxincludegraphics{{01-Introduction_170_0}.png}


\chapter{Deep Learning}
\label{\detokenize{01-Introduction:deep-learning}}
\sphinxAtStartPar
We won’t talk too much about deep learning now, but it certainly shows why DAGs are so important.

\sphinxAtStartPar
The steps above are simple toys compared to what tools are already in use for machine learning

\sphinxAtStartPar
\sphinxurl{https://keras.io/api/utils/model\_plotting\_utils/}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{IPython}\PYG{n+nn}{.}\PYG{n+nn}{display} \PYG{k+kn}{import} \PYG{n}{SVG}
\PYG{k+kn}{from} \PYG{n+nn}{keras}\PYG{n+nn}{.}\PYG{n+nn}{applications}\PYG{n+nn}{.}\PYG{n+nn}{resnet50} \PYG{k+kn}{import} \PYG{n}{ResNet50}
\PYG{k+kn}{from} \PYG{n+nn}{keras}\PYG{n+nn}{.}\PYG{n+nn}{utils}\PYG{n+nn}{.}\PYG{n+nn}{vis\PYGZus{}utils} \PYG{k+kn}{import} \PYG{n}{model\PYGZus{}to\PYGZus{}dot} 
\PYG{n}{resnet} \PYG{o}{=} \PYG{n}{ResNet50}\PYG{p}{(}\PYG{n}{weights} \PYG{o}{=} \PYG{k+kc}{None}\PYG{p}{)}
\PYG{n}{SVG}\PYG{p}{(}\PYG{n}{model\PYGZus{}to\PYGZus{}dot}\PYG{p}{(}\PYG{n}{resnet}\PYG{p}{,}\PYG{n}{rankdir}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{p}{)}\PYG{o}{.}\PYG{n}{create\PYGZus{}svg}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}IPython.core.display.SVG object\PYGZgt{}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{IPython}\PYG{n+nn}{.}\PYG{n+nn}{display} \PYG{k+kn}{import} \PYG{n}{clear\PYGZus{}output}\PYG{p}{,} \PYG{n}{Image}\PYG{p}{,} \PYG{n}{display}\PYG{p}{,} \PYG{n}{HTML}
\PYG{c+c1}{\PYGZsh{}import keras.backend as K}
\PYG{k+kn}{import} \PYG{n+nn}{tensorflow}\PYG{n+nn}{.}\PYG{n+nn}{python}\PYG{n+nn}{.}\PYG{n+nn}{keras}\PYG{n+nn}{.}\PYG{n+nn}{backend} \PYG{k}{as} \PYG{n+nn}{K}
\PYG{k+kn}{import} \PYG{n+nn}{tensorflow} \PYG{k}{as} \PYG{n+nn}{tf}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{k}{def} \PYG{n+nf}{strip\PYGZus{}consts}\PYG{p}{(}\PYG{n}{graph\PYGZus{}def}\PYG{p}{,} \PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{o}{=}\PYG{l+m+mi}{32}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Strip large constant values from graph\PYGZus{}def.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{strip\PYGZus{}def} \PYG{o}{=} \PYG{n}{tf}\PYG{o}{.}\PYG{n}{GraphDef}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{n0} \PYG{o+ow}{in} \PYG{n}{graph\PYGZus{}def}\PYG{o}{.}\PYG{n}{node}\PYG{p}{:}
        \PYG{n}{n} \PYG{o}{=} \PYG{n}{strip\PYGZus{}def}\PYG{o}{.}\PYG{n}{node}\PYG{o}{.}\PYG{n}{add}\PYG{p}{(}\PYG{p}{)} 
        \PYG{n}{n}\PYG{o}{.}\PYG{n}{MergeFrom}\PYG{p}{(}\PYG{n}{n0}\PYG{p}{)}
        \PYG{k}{if} \PYG{n}{n}\PYG{o}{.}\PYG{n}{op} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Const}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:}
            \PYG{n}{tensor} \PYG{o}{=} \PYG{n}{n}\PYG{o}{.}\PYG{n}{attr}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{value}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{tensor}
            \PYG{n}{size} \PYG{o}{=} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{tensor}\PYG{o}{.}\PYG{n}{tensor\PYGZus{}content}\PYG{p}{)}
            \PYG{k}{if} \PYG{n}{size} \PYG{o}{\PYGZgt{}} \PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{p}{:}
                \PYG{n}{tensor}\PYG{o}{.}\PYG{n}{tensor\PYGZus{}content} \PYG{o}{=} \PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZlt{}stripped }\PYG{l+s+si}{\PYGZpc{}d}\PYG{l+s+s2}{ bytes\PYGZgt{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{k}{size}).encode(\PYGZsq{}ascii\PYGZsq{})
    \PYG{k}{return} \PYG{n}{strip\PYGZus{}def}

\PYG{k}{def} \PYG{n+nf}{show\PYGZus{}graph}\PYG{p}{(}\PYG{n}{graph\PYGZus{}def}\PYG{p}{,} \PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{o}{=}\PYG{l+m+mi}{32}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}Visualize TensorFlow graph.\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{if} \PYG{n+nb}{hasattr}\PYG{p}{(}\PYG{n}{graph\PYGZus{}def}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{as\PYGZus{}graph\PYGZus{}def}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{graph\PYGZus{}def} \PYG{o}{=} \PYG{n}{graph\PYGZus{}def}\PYG{o}{.}\PYG{n}{as\PYGZus{}graph\PYGZus{}def}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{strip\PYGZus{}def} \PYG{o}{=} \PYG{n}{strip\PYGZus{}consts}\PYG{p}{(}\PYG{n}{graph\PYGZus{}def}\PYG{p}{,} \PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{o}{=}\PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{p}{)}
    \PYG{n}{code} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+s2}{        \PYGZlt{}script\PYGZgt{}}
\PYG{l+s+s2}{          function load() }\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}
\PYG{l+s+s2}{            document.getElementById(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}id\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{).pbtxt = }\PYG{l+s+si}{\PYGZob{}data\PYGZcb{}}\PYG{l+s+s2}{;}
\PYG{l+s+s2}{          \PYGZcb{}\PYGZcb{}}
\PYG{l+s+s2}{        \PYGZlt{}/script\PYGZgt{}}
\PYG{l+s+s2}{        \PYGZlt{}link rel=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{import}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ href=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://tensorboard.appspot.com/tf\PYGZhy{}graph\PYGZhy{}basic.build.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ onload=load()\PYGZgt{}}
\PYG{l+s+s2}{        \PYGZlt{}div style=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{height:600px}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZgt{}}
\PYG{l+s+s2}{          \PYGZlt{}tf\PYGZhy{}graph\PYGZhy{}basic id=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}id\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZgt{}\PYGZlt{}/tf\PYGZhy{}graph\PYGZhy{}basic\PYGZgt{}}
\PYG{l+s+s2}{        \PYGZlt{}/div\PYGZgt{}}
\PYG{l+s+s2}{    }\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{data}\PYG{o}{=}\PYG{n+nb}{repr}\PYG{p}{(}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{strip\PYGZus{}def}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{id}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{graph}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{+}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{random}\PYG{o}{.}\PYG{n}{rand}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}

    \PYG{n}{iframe} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+s2}{        \PYGZlt{}iframe seamless style=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{width:1200px;height:620px;border:0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ srcdoc=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZgt{}\PYGZlt{}/iframe\PYGZgt{}}
\PYG{l+s+s2}{    }\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{code}\PYG{o}{.}\PYG{n}{replace}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZam{}quot;}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{display}\PYG{p}{(}\PYG{n}{HTML}\PYG{p}{(}\PYG{n}{iframe}\PYG{p}{)}\PYG{p}{)}
    
\PYG{n}{sess} \PYG{o}{=} \PYG{n}{K}\PYG{o}{.}\PYG{n}{get\PYGZus{}session}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{show\PYGZus{}graph}\PYG{p}{(}\PYG{n}{sess}\PYG{o}{.}\PYG{n}{graph}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gt}{\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{n+ne}{AttributeError}\PYG{g+gWhitespace}{                            }Traceback (most recent call last)
\PYG{o}{\PYGZlt{}}\PYG{n}{ipython}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{input}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{75}\PYG{o}{\PYGZhy{}}\PYG{n}{f9fa486b2250}\PYG{o}{\PYGZgt{}} \PYG{o+ow}{in} \PYG{o}{\PYGZlt{}}\PYG{n}{module}\PYG{o}{\PYGZgt{}}
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{40} 
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{41} \PYG{n}{sess} \PYG{o}{=} \PYG{n}{K}\PYG{o}{.}\PYG{n}{get\PYGZus{}session}\PYG{p}{(}\PYG{p}{)}
\PYG{n+ne}{\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{} }\PYG{l+m+mi}{42} \PYG{n}{show\PYGZus{}graph}\PYG{p}{(}\PYG{n}{sess}\PYG{o}{.}\PYG{n}{graph}\PYG{p}{)}

\PYG{n+nn}{\PYGZlt{}ipython\PYGZhy{}input\PYGZhy{}75\PYGZhy{}f9fa486b2250\PYGZgt{}} in \PYG{n+ni}{show\PYGZus{}graph}\PYG{n+nt}{(graph\PYGZus{}def, max\PYGZus{}const\PYGZus{}size)}
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{21}     \PYG{k}{if} \PYG{n+nb}{hasattr}\PYG{p}{(}\PYG{n}{graph\PYGZus{}def}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{as\PYGZus{}graph\PYGZus{}def}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{:}
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{22}         \PYG{n}{graph\PYGZus{}def} \PYG{o}{=} \PYG{n}{graph\PYGZus{}def}\PYG{o}{.}\PYG{n}{as\PYGZus{}graph\PYGZus{}def}\PYG{p}{(}\PYG{p}{)}
\PYG{n+ne}{\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{} }\PYG{l+m+mi}{23}     \PYG{n}{strip\PYGZus{}def} \PYG{o}{=} \PYG{n}{strip\PYGZus{}consts}\PYG{p}{(}\PYG{n}{graph\PYGZus{}def}\PYG{p}{,} \PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{o}{=}\PYG{n}{max\PYGZus{}const\PYGZus{}size}\PYG{p}{)}
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{24}     \PYG{n}{code} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{25}\PYG{l+s+s2}{         \PYGZlt{}script\PYGZgt{}}

\PYG{n+nn}{\PYGZlt{}ipython\PYGZhy{}input\PYGZhy{}75\PYGZhy{}f9fa486b2250\PYGZgt{}} in \PYG{n+ni}{strip\PYGZus{}consts}\PYG{n+nt}{(graph\PYGZus{}def, max\PYGZus{}const\PYGZus{}size)}
\PYG{g+gWhitespace}{      }\PYG{l+m+mi}{6}\PYG{l+s+s2}{ def strip\PYGZus{}consts(graph\PYGZus{}def, max\PYGZus{}const\PYGZus{}size=32):}
\PYG{g+gWhitespace}{      }\PYG{l+m+mi}{7}\PYG{l+s+s2}{     }\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{n}{Strip} \PYG{n}{large} \PYG{n}{constant} \PYG{n}{values} \PYG{k+kn}{from} \PYG{n+nn}{graph\PYGZus{}def}\PYG{n+nn}{.}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{n+ne}{\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{} }\PYG{l+m+mi}{8}\PYG{l+s+s2}{     strip\PYGZus{}def = tf.GraphDef()}
\PYG{g+gWhitespace}{      }\PYG{l+m+mi}{9}\PYG{l+s+s2}{     for n0 in graph\PYGZus{}def.node:}
\PYG{g+gWhitespace}{     }\PYG{l+m+mi}{10}\PYG{l+s+s2}{         n = strip\PYGZus{}def.node.add()}

\PYG{n+ne}{AttributeError}: module \PYGZsq{}tensorflow\PYGZsq{} has no attribute \PYGZsq{}GraphDef\PYGZsq{}
\end{sphinxVerbatim}







\renewcommand{\indexname}{Index}
\printindex
\end{document}